(this["webpackJsonpweather-react-app"]=this["webpackJsonpweather-react-app"]||[]).push([[0],{11:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),u=a.n(c),l=(a(11),a(1)),o=Object(n.createContext)(),i=a(17),s=function(e){var t=Object(n.useState)((new Date).toLocaleTimeString()),a=Object(l.a)(t,2),c=a[0],u=a[1];return Object(n.useEffect)((function(){setInterval((function(){u((new Date).toLocaleTimeString())}),1e3)})),r.a.createElement("h1",{className:"current-weather__time"},c)},m=function(){var e=Object(n.useContext)(o),t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(l.a)(a,2),u=c[0],m=c[1],p=e.weather,h=e.city,f=e.setCity,E=e.getWeather,d=e.submitCity,y=e.error,b=e.getIcon;return Object(n.useEffect)((function(){var e=localStorage.getItem("city");t.current.focus(),e&&E(e),m(!0)}),[]),r.a.createElement(i.a,{in:u,timeout:300},(function(e){return r.a.createElement("div",{className:"current-weather blur ".concat(e)},r.a.createElement(s,null),r.a.createElement("h2",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement("p",null,p.city),b(p.icon)),r.a.createElement("p",{className:"current-weather__temperature"},"Temperature: ",p.temp),r.a.createElement("hr",null),r.a.createElement("p",{className:"current-weather__description"},p.description),r.a.createElement("p",{className:"current-weather__pressure"}," ","Pressure: ",p.pressure),r.a.createElement("form",{className:"current-weather__form",onSubmit:d},r.a.createElement("input",{className:"form-input",onChange:function(e){return f(e)},value:h,type:"text",placeholder:y?"Please type the right city name":"Type the city name",ref:t}),y&&r.a.createElement("p",{style:{color:"red"}},"Please type the right city name"),r.a.createElement("button",{className:"form-btn",type:"submit",onClick:function(){return E(h)}},"search")))}))};function p(e){return(e-273.15).toFixed(1)}var h=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"cube1"}),r.a.createElement("div",{className:"cube2"}))},f=function(e){var t=e.days,a=e.getIcon;return t?r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement("div",{key:t,className:"week-weather__day"},r.a.createElement("h4",null,function(e){switch(e){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"Day"}}(function(e){return new Date(1e3*e.date).getDay()}(e)),":",r.a.createElement("span",{className:"day__number"}," ",function(e){return new Date(1e3*e.date).getUTCDate()}(e)),r.a.createElement("span",{className:"day__descroption"},e.weather[0].description)),r.a.createElement("span",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement("p",null,"Temp: ",p(e.temp.day),"\xb0C"),r.a.createElement("span",null,a(e.weather[0].icon))))}))):r.a.createElement(h,null)},E=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(!1),s=Object(l.a)(u,2),m=s[0],p=s[1],E=Object(n.useState)(!1),d=Object(l.a)(E,2),y=d[0],b=d[1],w=Object(n.useContext)(o),O=w.weather.coord,j=w.setHours,_=w.getIcon;return Object(n.useEffect)((function(){!function(){if(p(!0),O)fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(O.lat,"&lon=").concat(O.lon,"&\n           exclude=hourly,daily&appid=4426de957ef37ff3fa22377c7667eb4d")).then((function(e){return e.json()})).then((function(e){var t=e.daily.map((function(e,t){return{id:t,date:e.dt,temp:e.temp,humidity:e.humidity,weather:e.weather,pressure:e.pressure}})),a=e.hourly.map((function(e,t){return{id:t,date:e.dt,temp:e.temp,weather:e.weather}}));j(a),c(t),p(!1),b(!0)}))}()}),[O]),O?m&&O?r.a.createElement(h,null):r.a.createElement(i.a,{in:y,timeout:300},(function(e){return r.a.createElement("div",{className:"week-weather blur ".concat(e)},r.a.createElement(f,{days:a,getIcon:_}))})):null},d=function(e){var t=e.hours,a=e.getIcon;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement("div",{key:t,className:"hourly-weather__hour"},r.a.createElement("span",{className:"hour__time"},r.a.createElement("h4",{className:"hour__time_item"},e.time),r.a.createElement("span",{className:"hour__time_item"},a(e.weather[0].icon))),r.a.createElement("p",{className:"hour__temperature"},"Temp: ",e.temp,"\xb0C"))})))},y=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],c=t[1],u=Object(n.useContext)(o),s=Object(n.useState)(!1),m=Object(l.a)(s,2),h=m[0],f=m[1],E=u.hourly,y=u.getIcon;return Object(n.useEffect)((function(){if(E){var e=E.filter((function(e){return e.id<=23})).map((function(e){return{temp:p(e.temp),weather:e.weather,time:new Date(1e3*e.date).toLocaleTimeString().slice(0,-3)}}));setTimeout((function(){f(!0)}),10),c(e)}}),[E]),a?r.a.createElement(i.a,{in:h,timeout:1e3},(function(e){return r.a.createElement("div",{className:"hourly-weather blur ".concat(e)},r.a.createElement(d,{hours:a,getIcon:y}))})):null},b=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement(m,null),r.a.createElement(E,null),r.a.createElement(y,null))},w=a(2),O=function(e,t){switch(t.type){case"SET_CITY":return Object(w.a)(Object(w.a)({},e),{},{city:t.payload});case"REMOVE_CITY":return Object(w.a)(Object(w.a)({},e),{},{city:""});case"GET_WEATHER":return Object(w.a)(Object(w.a)({},e),{},{weather:t.payload});case"SET_ERROR":return Object(w.a)(Object(w.a)({},e),{},{error:!0});case"REMOVE_ERROR":return Object(w.a)(Object(w.a)({},e),{},{error:!1});case"SET_HOURS":return Object(w.a)(Object(w.a)({},e),{},{hourly:t.payload});default:return e}},j=function(e){var t=Object(n.useReducer)(O,{city:"",weather:{},error:!1,hourly:null}),a=Object(l.a)(t,2),c=a[0],u=a[1];return r.a.createElement(o.Provider,{value:{getIcon:function(e){return e&&r.a.createElement("img",{style:{width:"50px"},src:"http://openweathermap.org/img/wn/".concat(e,"@2x.png"),alt:"icon-weather"})},setHours:function(e){u({type:"SET_HOURS",payload:e})},setCity:function(e){var t=e.target.value.toLowerCase();u({type:"SET_CITY",payload:t})},getWeather:function(e){fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=4426de957ef37ff3fa22377c7667eb4d")).then((function(e){return e.json()})).then((function(t){var a,n={city:t.name,icon:t.weather[0].icon,temp:p(t.main.temp),pressure:(a=t.main.pressure,(a/1.333).toFixed(0)),coord:{lat:t.coord.lat,lon:t.coord.lon},description:t.weather[0].description};u({type:"GET_WEATHER",payload:n}),localStorage.setItem("city",e)})).catch((function(e){return u({type:"SET_ERROR"})}))},submitCity:function(e){e.preventDefault(),u({type:"REMOVE_CITY"}),u({type:"REMOVE_ERROR"})},hourly:c.hourly,city:c.city,error:c.error,weather:c.weather}},e.children)};var _=function(){return r.a.createElement(j,null,r.a.createElement(b,null))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root"))},6:function(e,t,a){e.exports=a(15)}},[[6,1,2]]]);
//# sourceMappingURL=main.8a39c20c.chunk.js.map